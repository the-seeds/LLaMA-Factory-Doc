# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2025, LlamaFactory team.
# This file is distributed under the same license as the LLaMA Factory
# package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2025.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: LLaMA Factory \\n"
"Report-Msgid-Bugs-To: \\n"
"POT-Creation-Date: 2025-03-05 01:10+0800\\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\\n"
"Language: en\\n"
"Language-Team: en <LL@li.org>\\n"
"Plural-Forms: nplurals=2; plural=(n != 1);\\n"
"MIME-Version: 1.0\\n"
"Content-Type: text/plain; charset=utf-8\\n"
"Content-Transfer-Encoding: 8bit\\n"
"Generated-By: Babel 2.16.0\\n"

#: ../../source/advanced/npu_installation.rst:1
msgid "NPU安装及配置"
msgstr "NPU Installation"

#: ../../source/advanced/npu_installation.rst:4
msgid "LLaMA-Factory 支持华为昇腾 NPU (A2/A3) 设备。您可以选择以下三种方式之一进行环境配置及使用："
msgstr "LLaMA-Factory supports Huawei Ascend NPU (A2/A3) devices. You can choose one of the following three methods for environment setup and usage:"

#: ../../source/advanced/npu_installation.rst:11
msgid "核心依赖说明"
msgstr "Core Dependencies"

#: ../../source/advanced/npu_installation.rst:14
msgid "所有安装方式均依赖以下组件："
msgstr "All installation methods depend on the following components:"

#: ../../source/advanced/npu_installation.rst:16
msgid "**HDK**：固件及驱动"
msgstr "**HDK**: Firmware and drivers"

#: ../../source/advanced/npu_installation.rst:17
msgid "**CANN**：异构计算架构"
msgstr "**CANN**: Heterogeneous Computing Architecture"

#: ../../source/advanced/npu_installation.rst:18
msgid "**torch_npu**：PyTorch 的昇腾适配插件"
msgstr "**torch_npu**: Ascend adaptation plugin for PyTorch"

#: ../../source/advanced/npu_installation.rst:20
msgid "根据安装方式不同，所需操作有所区别："
msgstr "Required steps vary depending on the installation method:"

#: ../../source/advanced/npu_installation.rst:22
msgid "**手动安装**：需手动安装 HDK、CANN 和 torch_npu。"
msgstr "**Manual installation**: Manually install HDK, CANN, and torch_npu."

#: ../../source/advanced/npu_installation.rst:23
msgid "**Docker 镜像/构建**：宿主机仅需安装 HDK (驱动/固件)，CANN 和 torch_npu 已集成在镜像中。"
msgstr "**Docker image/build**: The host only needs to install HDK (driver/firmware). CANN and torch_npu are integrated in the image."

#: ../../source/advanced/npu_installation.rst:28
msgid "方式一：手动安装环境"
msgstr "Method 1: Manual Environment Installation"

#: ../../source/advanced/npu_installation.rst:31
msgid "本方式需要您手动安装 HDK、CANN 和 torch_npu。"
msgstr "This method requires you to manually install HDK, CANN, and torch_npu."

#: ../../source/advanced/npu_installation.rst:34
msgid "1. 版本及下载链接"
msgstr "1. Versions and Download Links"

#: ../../source/advanced/npu_installation.rst:37
msgid "本文档列举了最新的依赖版本及下载链接，请根据设备型号选择："
msgstr "This document lists the latest dependency versions and download links. Please choose according to your device model:"

#: ../../source/advanced/npu_installation.rst:44
msgid "设备"
msgstr "Device"

#: ../../source/advanced/npu_installation.rst:45
msgid "依赖"
msgstr "Dependency"

#: ../../source/advanced/npu_installation.rst:46
msgid "链接"
msgstr "Link"

#: ../../source/advanced/npu_installation.rst:66
msgid "具体需要安装的包可查看下文实际安装指南。"
msgstr "Refer to the installation guide below to see which packages need to be installed."

#: ../../source/advanced/npu_installation.rst:69
msgid "``torch_npu`` 下载链接跳转页面，请点击所需的 PyTorch 版本的“获取源码”，链接将自动跳转至 `torch_npu 发行版本 <https://gitcode.com/Ascend/pytorch/releases>`__ 指定界面。"
msgstr "On the ``torch_npu`` download page, click “Get source” for the desired PyTorch version. The link will automatically redirect to the `torch_npu releases <https://gitcode.com/Ascend/pytorch/releases>`__ page."

#: ../../source/advanced/npu_installation.rst:70
msgid "推荐使用 ``torch 2.7.1`` + ``python 3.11``，该组合作为 ``torch_npu`` 的稳定版本长期演进"
msgstr "It is recommended to use ``torch 2.7.1`` + ``python 3.11``; this combination serves as the stable version for long-term evolution of ``torch_npu``."

#: ../../source/advanced/npu_installation.rst:72
msgid "2. 驱动及固件"
msgstr "2. Drivers and Firmware"

#: ../../source/advanced/npu_installation.rst:75
msgid "请根据实际情况选择 ``.run`` 或 ``.deb`` 的 HDK 安装包，并请注意安装包对 ``aarch64`` 和 ``x86`` 做了区分。"
msgstr "Choose the HDK installation package in ``.run`` or ``.deb`` format as appropriate, noting that packages are differentiated for ``aarch64`` and ``x86``."

#: ../../source/advanced/npu_installation.rst:77
msgid "以下以 A2 系列为例。A3 系列包 ``firmware`` 和 ``driver`` 包名有所变化，可以根据链接内实际情况选择。"
msgstr "The following uses the A2 series as an example. For the A3 series, the ``firmware`` and ``driver`` package names differ; choose based on the linked page."

#: ../../source/advanced/npu_installation.rst:79
msgid "A3 内部包名类似于 ``Atlas-A3-hdk-npu-driver_25.0.rc1.3_linux-aarch64.run`` 和 ``Atlas-A3-hdk-npu-firmware_7.7.0.3.228.run``，实际安装方式没有变化。"
msgstr "A3 internal package names are similar to ``Atlas-A3-hdk-npu-driver_25.0.rc1.3_linux-aarch64.run`` and ``Atlas-A3-hdk-npu-firmware_7.7.0.3.228.run``. The installation method does not change."

#: ../../source/advanced/npu_installation.rst:81
msgid "上传安装包，以 root 用户登录，将驱动和固件包上传至服务器（如 ``/home``）。"
msgstr "Upload installation packages, log in as root and upload the driver and firmware packages to the server (e.g., ``/home``)."

#: ../../source/advanced/npu_installation.rst:84
msgid "增加执行权限，进入安装包目录，执行以下命令。"
msgstr "Add execution permissions, enter the package directory and execute the following commands."

#: ../../source/advanced/npu_installation.rst:92
msgid "安装驱动与固件，默认安装路径为 ``/usr/local/Ascend``。"
msgstr "Install drivers and firmware, The default installation path is ``/usr/local/Ascend``."

#: ../../source/advanced/npu_installation.rst:95
msgid "**安装驱动**："
msgstr "**Install driver**:"

#: ../../source/advanced/npu_installation.rst:101
msgid "出现 ``Driver package installed successfully!`` 表示成功。"
msgstr "If ``Driver package installed successfully!`` appears, the installation succeeded."

#: ../../source/advanced/npu_installation.rst:103
msgid "**安装固件**："
msgstr "**Install firmware**:"

#: ../../source/advanced/npu_installation.rst:109
msgid "出现 ``Firmware package installed successfully!`` 表示成功。"
msgstr "If ``Firmware package installed successfully!`` appears, the installation succeeded."

#: ../../source/advanced/npu_installation.rst:111
msgid "若未创建默认用户 ``HwHiAiUser``，需在安装命令中指定用户和组： ``./Ascend-hdk-*.run --full --install-username=<username> --install-usergroup=<usergroup>``"
msgstr "If the default user ``HwHiAiUser`` has not been created, specify the user and group in the installation command: ``./Ascend-hdk-*.run --full --install-username=<username> --install-usergroup=<usergroup>``"

#: ../../source/advanced/npu_installation.rst:116
msgid "重启系统，根据提示决定是否重启。如需重启："
msgstr "Decide whether to reboot according to prompts. To reboot:"

#: ../../source/advanced/npu_installation.rst:123
msgid "验证安装，执行以下命令查看驱动加载状态："
msgstr "Verify installation. Run the following command to check driver load status:"

#: ../../source/advanced/npu_installation.rst:132
msgid "3. CANN"
msgstr "3. CANN"

#: ../../source/advanced/npu_installation.rst:135
msgid "请根据实际情况选择 ``.run`` 或 ``.deb`` 的 CANN 安装包，并请注意安装包对 ``aarch64`` 和 ``x86`` 做了区分。"
msgstr "Choose the CANN installation package in ``.run`` or ``.deb`` format as appropriate, noting that packages are differentiated for ``aarch64`` and ``x86``."

#: ../../source/advanced/npu_installation.rst:137
msgid "以下以 A2 系列为例。A3 系列唯一区别是 ``kernels`` 包名字有所变化，可以根据链接内实际情况选择。A3 内部包名类似于 ``Atlas-A3-cann-kernels_8.3.RC1_linux-aarch64.run``，实际安装方式没有变化。"
msgstr "The following uses the A2 series as an example. The only difference for the A3 series is the name of the ``kernels`` package; choose according to the linked page. A3 internal package names are similar to ``Atlas-A3-cann-kernels_8.3.RC1_linux-aarch64.run``. The installation method does not change."

#: ../../source/advanced/npu_installation.rst:140
msgid "(1) 安装 Toolkit 开发套件"
msgstr "(1) Install Toolkit development kit"

#: ../../source/advanced/npu_installation.rst:143
msgid "Toolkit 用于训练、推理及开发。"
msgstr "Toolkit is used for training, inference, and development."

#: ../../source/advanced/npu_installation.rst:145
msgid "请确保安装目录可用空间大于 10G。"
msgstr "Ensure the installation directory has more than 10G of free space."


#: ../../source/advanced/npu_installation.rst:150
msgid "**授权与安装**：以 root 用户安装，默认安装路径为 ``/usr/local/Ascend``；以普通用户安装，默认安装路径为 ``${HOME}/Ascend``。"
msgstr "**Authorization and installation**: For root user: ``/usr/local/Ascend``; For normal user: ``${HOME}/Ascend``."

#: ../../source/advanced/npu_installation.rst:158
msgid "**配置环境变量**：以 root 用户为例，建议写入 ``~/.bashrc``。"
msgstr "**Configure environment variables**: For root users, it is recommended to write to ``~/.bashrc``."

#: ../../source/advanced/npu_installation.rst:166
msgid "(2) 安装 Kernels 算子包"
msgstr "(2) Install Kernels operator package"

#: ../../source/advanced/npu_installation.rst:169
msgid "需在安装 Toolkit 后执行。如需安装静态库，请将 ``--install`` 改为 ``--devel``。"
msgstr "Execute after installing Toolkit. To install static libraries, replace ``--install`` with ``--devel``."


#: ../../source/advanced/npu_installation.rst:179
msgid "(3) 安装 NNAL 神经网络加速库（可选）"
msgstr "(3) Install NNAL neural network acceleration library (optional)"

#: ../../source/advanced/npu_installation.rst:182
msgid "包含 ATB 和 SiP 加速库。需在安装 Toolkit 后执行。"
msgstr "Includes ATB and SiP acceleration libraries. Execute after installing Toolkit."

#: ../../source/advanced/npu_installation.rst:188
msgid "**授权与安装**："
msgstr "**Authorization and installation**:"


#: ../../source/advanced/npu_installation.rst:188
msgid "**配置环境变量**："
msgstr "**Configure environment variables**:"

#: ../../source/advanced/npu_installation.rst:192
msgid "（二选一，不可同时配置）"
msgstr "(Choose one of the two, do not configure both)"

#: ../../source/advanced/npu_installation.rst:196
msgid "# ATB"
msgstr "# ATB"

#: ../../source/advanced/npu_installation.rst:199
msgid "# SiP"
msgstr "# SiP"

#: ../../source/advanced/npu_installation.rst:204
msgid "4. torch-npu"
msgstr "4. torch-npu"

#: ../../source/advanced/npu_installation.rst:207
msgid "建议在安装 LLaMA-Factory 时一并安装 ``torch-npu`` 插件，LLaMA-Factory 依赖内会持续更新稳定版本的 ``torch-npu`` 插件。"
msgstr "It is recommended to install the ``torch-npu`` plugin together when installing LLaMA-Factory. LLaMA-Factory dependencies will continuously update stable versions of the ``torch-npu`` plugin."

#: ../../source/advanced/npu_installation.rst:213
msgid "当然您也可以手动下载后安装 ``torch-npu`` 插件，例如："
msgstr "You can also download and install the ``torch-npu`` plugin manually, for example:"

#: ../../source/advanced/npu_installation.rst:219
msgid "安装 ``torch-npu`` 插件需要注意："
msgstr "Notes when installing the ``torch-npu`` plugin:"

#: ../../source/advanced/npu_installation.rst:221
msgid "下载的 ``torch_npu`` 会对支持的 Python 版本做区分，请根据实际环境情况选择对应安装包，``pip install torch_npu`` 时，也会一并安装对应版本的 ``torch``。"
msgstr "The downloaded ``torch_npu`` distinguishes between supported Python versions. Choose the appropriate installation package for your environment. When running ``pip install torch_npu``, the corresponding version of ``torch`` will be installed together."

#: ../../source/advanced/npu_installation.rst:222
msgid "环境里安装的 ``torch-npu`` 和 ``torch`` 版本需要对齐。例如 ``torch-npu`` 版本为 ``2.7.1`` 时，``torch`` 的版本也需要为 ``2.7.1``。有时依赖互斥，安装不用依赖的过程会导致 ``torch`` 版本被更新，从而导致报错。"
msgstr "The versions of ``torch-npu`` and ``torch`` installed in the environment must be aligned. For example, if ``torch-npu`` is version ``2.7.1``, then ``torch`` must also be version ``2.7.1``. Dependency conflicts may occasionally update ``torch`` during installation, leading to errors."

#: ../../source/advanced/npu_installation.rst:224
msgid "5. 验证安装"
msgstr "5. Verify Installation"

#: ../../source/advanced/npu_installation.rst:227
msgid "执行以下 Python 脚本："
msgstr "Run the following Python script:"

#: ../../source/advanced/npu_installation.rst:235
msgid "预期输出：``True``"
msgstr "Expected output: ``True``"

#: ../../source/advanced/npu_installation.rst:239
msgid "该情况说明 ``HDK``、``CANN`` 和 ``torch_npu`` 都正常安装且生效。"
msgstr "This indicates that ``HDK``, ``CANN``, and ``torch_npu`` are all installed correctly and functioning."

#: ../../source/advanced/npu_installation.rst:245
msgid "方式二：Docker 预安装镜像"
msgstr "Method 2: Docker Pre-installed Image"

#: ../../source/advanced/npu_installation.rst:248
msgid "请确保宿主机已安装固件和驱动，可参考前文进行安装。"
msgstr "Ensure the host has installed firmware and drivers; refer to the previous section for installation."

#: ../../source/advanced/npu_installation.rst:251
msgid "LLaMA-Factory 的官方镜像托管于 `Docker Hub <https://hub.docker.com/r/hiyouga/llamafactory/tags>`__ 和 `quay.io <https://quay.io/repository/ascend/llamafactory?tab=tags>`__，二者镜像无区别。"
msgstr "LLaMA-Factory's official images are hosted on `Docker Hub <https://hub.docker.com/r/hiyouga/llamafactory/tags>`__ and `quay.io <https://quay.io/repository/ascend/llamafactory?tab=tags>`__; the images are identical."

#: ../../source/advanced/npu_installation.rst:253
msgid "1. 拉取镜像"
msgstr "1. Pull Image"

#: ../../source/advanced/npu_installation.rst:256
msgid "下载 main 分支最新镜像（请根据设备选择 A2 或 A3）。如需特定版本镜像，请访问镜像仓库查看 Tag。"
msgstr "Download the latest image from the main branch (choose A2 or A3 according to your device). For specific version images, visit the image repository to check the tags."

#: ../../source/advanced/npu_installation.rst:268
msgid ""
msgstr ""

#: ../../source/advanced/npu_installation.rst:270
msgid "2. 启动容器"
msgstr "2. Start Container"

#: ../../source/advanced/npu_installation.rst:273
msgid "使用以下命令启动容器（请根据实际情况修改 ``DOCKER_IMAGE`` 和 ``device``）："
msgstr "Start the container with the following command (modify ``DOCKER_IMAGE`` and ``device`` as appropriate):"

#: ../../source/advanced/npu_installation.rst:385
msgid "配置 ``--privileged=true`` 可开启特权模式，赋予容器对底层硬件管理设备（如 ``/dev/davinci_manager``）的完整访问权限。这能解决多容器并行场景下，因权限限制导致的驱动初始化失败问题，确保 NPU 资源能被多个容器正常复用。"
msgstr "Setting ``--privileged=true`` enables privileged mode, granting the container full access to hardware management devices (such as ``/dev/davinci_manager``). This resolves driver initialization failures in multi-container scenarios caused by permission restrictions, ensuring NPU resources can be reused across containers."

#: ../../source/advanced/npu_installation.rst:389
msgid "**注意**：若未配置该参数，可能会出现首个容器占用后，后续容器因无权限而无法读取设备的情况。鉴于特权模式的权限过大，生产环境中请务必评估安全风险后慎重使用。"
msgstr "**Note**: Without this parameter, subsequent containers may fail to access devices due to insufficient permissions after the first container occupies them. Given the broad permissions of privileged mode, evaluate security risks carefully before using it in production."

#: ../../source/advanced/npu_installation.rst:312
msgid "3. 进入容器"
msgstr "3. Enter Container"

#: ../../source/advanced/npu_installation.rst:321
msgid "通过 ``--device /dev/davinci<N>`` 挂载指定 NPU 卡（支持 0-7）。容器内设备编号会自动重新映射（例如物理机 davinci6 代表容器内设备 0）。"
msgstr "Mount specified NPU cards using ``--device /dev/davinci<N>`` (supports 0–7). Device numbers inside the container are automatically remapped (e.g., physical machine davinci6 -> container device 0)."

#: ../../source/advanced/npu_installation.rst:323
msgid "进入容器后，可直接使用 ``llamafactory-cli train`` 启动训练，无需额外配置。"
msgstr "After entering the container, you can start training directly using ``llamafactory-cli train`` without additional configuration."

#: ../../source/advanced/npu_installation.rst:327
msgid "方式三：Docker 本地构建"
msgstr "Method 3: Docker Local Build"

#: ../../source/advanced/npu_installation.rst:331
msgid "请确保宿主机已安装固件和驱动。"
msgstr "Ensure the host has installed firmware and drivers."

#: ../../source/advanced/npu_installation.rst:333
msgid "LLaMA-Factory 提供 :ref:`docker_build` 和 :ref:`docker_compose` 两种构建方式。"
msgstr "LLaMA-Factory provides two build methods: :ref:`docker_build` and :ref:`docker_compose`."

#: ../../source/advanced/npu_installation.rst:338
msgid "1. 使用 Docker Build 构建"
msgstr "1. Build Using Docker Build"

#: ../../source/advanced/npu_installation.rst:341
msgid "构建镜像，在项目根目录下执行："
msgstr "Build image — execute at the project root:"

#: ../../source/advanced/npu_installation.rst:352
msgid "可修改 ``BASE_IMAGE`` 参数指定其他 CANN 版本（参考 `ascend/cann <https://quay.io/repository/ascend/cann?tab=tags&tag=latest>`__ ）。"
msgstr "Modify the ``BASE_IMAGE`` parameter to specify other CANN versions (see `ascend/cann <https://quay.io/repository/ascend/cann?tab=tags&tag=latest>`__)."

#: ../../source/advanced/npu_installation.rst:354
msgid "启动容器"
msgstr "Start container"

#: ../../source/advanced/npu_installation.rst:385
msgid "配置 ``--privileged=true`` 可开启特权模式，赋予容器对底层硬件管理设备（如 ``/dev/davinci_manager``）的完整访问权限。这能解决多容器并行场景下，因权限限制导致的驱动初始化失败问题，确保 NPU 资源能被多个容器正常复用。"
msgstr "Setting ``--privileged=true`` enables privileged mode, granting the container full access to hardware management devices (such as ``/dev/davinci_manager``). This resolves driver initialization failures in multi-container scenarios caused by permission restrictions, ensuring NPU resources can be reused across containers."

#: ../../source/advanced/npu_installation.rst:389
msgid "**注意**：若未配置该参数，可能会出现首个容器占用后，后续容器因无权限而无法读取设备的情况。鉴于特权模式的权限过大，生产环境中请务必评估安全风险后慎重使用。"
msgstr "**Note**: Without this parameter, subsequent containers may fail to access devices due to insufficient permissions after the first container occupies them. Given the broad permissions of privileged mode, evaluate security risks carefully before using it in production."

#: ../../source/advanced/npu_installation.rst:391
msgid "(3) 进入容器"
msgstr "(3) Enter container"

#: ../../source/advanced/npu_installation.rst:399
msgid "2. 使用 Docker Compose 构建"
msgstr "2. Build Using Docker Compose"

#: ../../source/advanced/npu_installation.rst:402
msgid "进入目录"
msgstr "Enter directory"

#: ../../source/advanced/npu_installation.rst:407
msgid "构建镜像并直接启动容器，请根据设备型号选择命令："
msgstr "Build image and start container directly — choose commands based on device model:"

#: ../../source/advanced/npu_installation.rst:418
msgid "进入容器"
msgstr "Enter container"

#: ../../source/advanced/npu_installation.rst:423
msgid "构建前，请检查 `docker-compose.yml` 中的 `devices` 列表，当前构建时只会挂卡 0，请根据需要做修改。"
msgstr "Before building, check the `devices` list in `docker-compose.yml`. Currently only card 0 is mounted during build; modify as needed."

